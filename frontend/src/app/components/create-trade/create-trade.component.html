<div class="create-trade-container">
  <div class="header">
    <h1>Create trade</h1>
    <button class="back-btn" (click)="goBack()">‚Üê Back</button>
  </div>

  <div *ngIf="error" class="alert error">
    {{ error }}
  </div>
  <div *ngIf="success" class="alert success">
    {{ success }}
  </div>

  <div class="trade-content" *ngIf="!isLoading">
    <div class="players-panel left-panel">
      <h2>My roster</h2>
      <div class="players-list">
        <div 
          *ngFor="let player of myRosterPlayers" 
          class="player-card"
          [class.selected]="selectedMyPlayerId === player.player.id"
          [ngStyle]="{'background-color': getTeamColor(player.player.team)}"
          (click)="selectMyPlayer(player.player.id)">
          <img class="team-logo" [src]="getTeamLogo(player.player.team)" [alt]="player.player.team">
          <div class="player-info">
            <h3>{{ player.player.firstName }} {{ player.player.lastName }}</h3>
            <p class="player-details">{{ player.player.team }} - {{ player.player.position }}</p>
            <p class="player-price">${{ player.player.price }}M</p>
            <p *ngIf="player.starter" class="starter-badge">STARTER</p>
            <p *ngIf="!player.starter" class="starter-badge">BENCH</p>
            <p *ngIf="player.captain" class="captain-badge">C</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Center: Selection Info -->
    <div class="center-panel">
      <div class="selection-info">
        <div *ngIf="selectedMyPlayerId" class="selected-player">
          <h3>My player:</h3>
          <p>{{ getSelectedMyPlayer()?.player?.firstName }} 
             {{ getSelectedMyPlayer()?.player?.lastName }}</p>
        </div>
        <div *ngIf="selectedOtherPlayerId" class="selected-player">
          <h3>His player:</h3>
          <p>{{ getSelectedOtherPlayer()?.player?.firstName }} 
             {{ getSelectedOtherPlayer()?.player?.lastName }}</p>
        </div>
        <button 
          class="create-btn" 
          [disabled]="!selectedMyPlayerId || !selectedOtherPlayerId || isLoading"
          (click)="createTrade()">
          Create trade
        </button>
      </div>
    </div>

    <!-- Right Side: Other Team Players -->
    <div class="players-panel right-panel">
      <h2>Roster partner</h2>
      <div class="team-selector">
        <select 
          [(ngModel)]="selectedOtherRosterId" 
          (change)="onOtherRosterSelected()"
          class="team-select">
          <option [value]="null">Choose roster...</option>
          <option *ngFor="let roster of otherRosters" [value]="roster.id">
            {{ roster.name }} ({{ roster.user?.name }} {{ roster.user?.lastname }})
          </option>
        </select>
      </div>
      
      <div class="players-list" *ngIf="selectedOtherRosterId">
        <div 
          *ngFor="let player of otherRosterPlayers" 
          class="player-card"
          [class.selected]="selectedOtherPlayerId === player.player.id"
          [ngStyle]="{'background-color': getTeamColor(player.player.team)}"
          (click)="selectOtherPlayer(player.player.id)">
          <img class="team-logo" [src]="getTeamLogo(player.player.team)" [alt]="player.player.team">
          <div class="player-info">
            <h3>{{ player.player.firstName }} {{ player.player.lastName }}</h3>
            <p class="player-details">{{ player.player.team }} - {{ player.player.position }}</p>
            <p class="player-price">${{ player.player.price }}M</p>
            <p *ngIf="player.starter" class="starter-badge">STARTER</p>
            <p *ngIf="!player.starter" class="starter-badge">BENCH</p>
            <p *ngIf="player.captain" class="captain-badge">C</p>
          </div>
        </div>
        <div *ngIf="otherRosterPlayers.length === 0" class="no-players">
          <p>There is no players in this roster</p>
        </div>
      </div>
      <div *ngIf="!selectedOtherRosterId" class="no-selection">
        <p>Choose roster for trade</p>
      </div>
    </div>
  </div>

  <div *ngIf="isLoading" class="loading">
    <p>Loading...</p>
  </div>
</div>

